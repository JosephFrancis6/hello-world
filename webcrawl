package webcrawl;

import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

import org.apache.commons.codec.binary.Base64;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

public class wcrawl {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		 String strURL = "http://imagine-apps.grid.alstom.com/Windchill/wtcore/jsp/jmx/serverStatus.jsp";
	        String strUserId = "502625028";
	        String strPasword = "joseph28francis";
	                
	        /*
	         * User id, password string needs to be in
	         * userid:password format with no space 
	         * in between them
	         */
	        String authString = strUserId + ":" + strPasword;
	        
	        //encode the authString using base64
	        String encodedString = 
	            new String( Base64.encodeBase64(authString.getBytes()) );
	        
	        /*
	         * connect to the website using Jsoup
	         * and provide above value in Authorization header
	         */
	        
	        try{
	            
	            Document document = Jsoup.connect(strURL)
	                    .header("Authorization", "Basic " + encodedString)
	                    .get();
	            
	            Elements bodies = document.getAllElements();
	            
//	            Elements links = document.select("a[href]");
	            Elements tables=document.getElementsByTag("td");
//	            System.out.println(tables.get(8));
	            PrintWriter out = null;
	            out = new PrintWriter(new FileWriter("C:\\Users\\i714769\\Desktop\\testing.txt"));
	            System.out.println(tables.get(8).text().split(" "));
	            String[] i=tables.get(8).text().split(" ");
	            for (String k : i) {
					System.out.println(k);
				}
//	            for(Element body : links )
//	            {
//	                System.out.println("\nlink:" + body.attr("href"));
//	                System.out.println("text:"+ body.text());
//	               
//	                out.println("\nlink:" + body.attr("href"));
//	                out.println("text:"+ body.text());}
	            

//	            System.out.println(document.title());
//	            System.out.println("Logged in using basic authentication");
	            
	        }catch (IOException e){
	            e.printStackTrace();
	        }
	}

}
